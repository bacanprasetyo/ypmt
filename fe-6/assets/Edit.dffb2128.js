import{u as C,d as A,a as T,b as L,c as j,r as i,o as x,e as f,f as e,t as d,g as c,w as k,h as g,F as $,A as u,T as n,P as y,Z as M,Q as N,p as B,i as m}from"./index.156f8da1.js";import{B as R}from"./BreadCrumb.47384a78.js";import{B as W}from"./BreadCrumbSpace.c287fb01.js";import{F as q,a as E}from"./vee-validate.esm.8976f289.js";const G={class:"pt-4 px-10 md:flex justify-between"},z={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"},I={class:"md:py-0 py-4"},J=m(" Buletin Psikologi "),K=m(" Edit "),O={class:"pt-4 px-10 md:flex justify-between"},Q=e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-gray-700 shadow-sm"})],-1),Z={class:"md:py-0 py-4 space-x-2 space-y-2"},H=e("button",{class:"btn hover:shadow-lg shadow text-white hover:text-gray-100 gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})]),m(" Kembali ")],-1),X=[H],Y={class:"px-4 py-4"},ee={class:"w-full"},te={class:"bg-white shadow rounded-lg px-0 py-4"},ae={class:"w-full lg:w-fi mx-4"},se={class:"p-2 sm:p-6 xl:p-8"},oe={class:"pt-0 px-0"},le={class:"w-full mx-0"},ne={class:"bg-white rounded-lg p-0 sm:p-6 xl:p-0"},ie={class:"grid md:grid-cols-2 gap-2"},de={class:"grid col-span-2"},re=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Judul",-1),ce={class:"text-xs text-red-600 mt-1"},ue=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Tipe",-1),me=e("option",{disabled:"",selected:""},"Pilih ?",-1),pe=e("option",null,"Link",-1),_e=e("option",null,"Upload",-1),he=[me,pe,_e],xe={class:"text-xs text-red-600 mt-1"},fe={key:0},ge=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Link",-1),ve={class:"text-xs text-red-600 mt-1"},be={key:1},we=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"File",-1),ke=e("p",{class:"text-sm font-bold"},[m(" Pilih file : "),e("code",{class:"text-red-400"},".doc/docx/pdf - max 5 MB")],-1),ye={class:"text-xs text-red-600 mt-1"},Be=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),Le={__name:"Edit",setup(De){const v=C();A(()=>v.getSekolah),v.$subscribe((t,s)=>{}),T().setPagesActive("buletin");const p=L(),_=j().params.id;i([]);const a=i([]);i([]),(async()=>{try{const t=await u.get(`owner/buletinpsikologi/${_}`);return a.value=t.data,t.data}catch(t){console.error(t)}})();const D=i([]);(async()=>{try{const t=await u.get("owner/paket");return D.value=t.data,t}catch(t){n.danger("Warning","Data Gagal dimuat"),console.error(t)}})();const b=t=>t?t.length<1?"This Field must be at least 2 characters":!0:"This field is required",F=()=>{a.value.tipe=="Upload"?P(h.value)&&V(h.value):S()},S=async t=>{let s={nama:a.value.nama,tipe:a.value.tipe,link:a.value.link,file:a.value.file};try{const l=await u.post(`owner/buletinpsikologi/${_}`,s);return n.success("Success","Data Berhasil ditambahkan!"),p.push({name:"AdminBuletin"}),l.data}catch(l){n.danger("Warning","Data gagal ditambahkan!"),console.error(l)}},h=i(null),w=i(null),U=t=>{let s=t.target.files[0];h.value=s,w.value=URL.createObjectURL(s),console.log(s,w.value)},P=t=>t?t.size>5048576?(n.danger("Warning","File harus kurang dari 5mb!"),!1):!0:(n.danger("Info","Pilih File terlebih dahulu!"),!1),V=async(t,s)=>{let l=`owner/buletinpsikologi/${_}`,o=new FormData;o.append("nama",a.value.nama),o.append("tipe",a.value.tipe),o.append("link",a.value.link),o.append("file",t);try{const r=await u.post(l,o,{headers:{"Content-Type":"multipart/form-data"}});return n.success("Success","Data Berhasil update!"),console.log(r),p.push({name:"AdminBuletin"}),r.data}catch(r){n.danger("Warning","Data gagal ditambahkan!"),console.error(r)}};return(t,s)=>(x(),f($,null,[e("div",G,[e("div",null,[e("span",z,d(a.value.nama),1)]),e("div",I,[c(R,null,{content:k(()=>[J,c(W),K]),_:1})])]),e("div",O,[Q,e("div",Z,[e("span",{onClick:s[0]||(s[0]=l=>g(p).go(-1))},X)])]),e("div",Y,[e("div",ee,[e("div",te,[e("div",ae,[e("div",se,[c(g(q),{onSubmit:F},{default:k(({errors:l})=>[e("div",oe,[e("div",le,[e("div",ne,[e("div",ie,[e("div",de,[re,y(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=o=>a.value.nama=o),rules:b,name:"nama",ref:"nama",class:"textarea textarea-bordered md:w-full max-w-2xl",placeholder:""},null,512),[[M,a.value.nama]]),e("div",ce,d(l.nama),1)]),e("div",null,[ue,y(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":s[2]||(s[2]=o=>a.value.tipe=o),rules:b},he,512),[[N,a.value.tipe]]),e("div",xe,d(l.tipe),1)]),a.value.tipe=="Link"?(x(),f("div",fe,[ge,c(g(E),{modelValue:a.value.link,"onUpdate:modelValue":s[3]||(s[3]=o=>a.value.link=o),type:"text",name:"link",ref:"link",class:"input input-bordered md:w-full max-w-2xl",required:""},null,8,["modelValue"]),e("div",ve,d(l.link),1)])):B("",!0),a.value.tipe=="Upload"?(x(),f("div",be,[we,ke,e("input",{type:"file",name:"fileUpload",onChange:s[4]||(s[4]=o=>U(o)),class:"input md:w-full max-w-2xl",required:""},null,32),e("div",ye,d(l.file),1)])):B("",!0)]),Be])])])]),_:1})])])])])])],64))}};export{Le as default};
