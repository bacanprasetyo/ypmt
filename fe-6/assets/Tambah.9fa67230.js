import{u as V,d as C,a as P,b as T,c as A,r as i,o as _,e as h,f as e,g as r,w as b,h as x,F as L,A as w,T as n,P as k,Z as j,t as u,Q as M,p as y,i as c}from"./index.156f8da1.js";import{B as N}from"./BreadCrumb.47384a78.js";import{B as R}from"./BreadCrumbSpace.c287fb01.js";import{F as q,a as W}from"./vee-validate.esm.8976f289.js";const z={class:"pt-4 px-10 md:flex justify-between"},E=e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"}," Buletin Psikologi ")],-1),G={class:"md:py-0 py-4"},I=c(" Buletin Psikologi "),$=c(" Edit "),J={class:"pt-4 px-10 md:flex justify-between"},K=e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-gray-700 shadow-sm"})],-1),O={class:"md:py-0 py-4 space-x-2 space-y-2"},Q=e("button",{class:"btn hover:shadow-lg shadow text-white hover:text-gray-100 gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})]),c(" Kembali ")],-1),Z=[Q],H={class:"px-4 py-4"},X={class:"w-full"},Y={class:"bg-white shadow rounded-lg px-0 py-4"},ee={class:"w-full lg:w-fi mx-4"},te={class:"p-2 sm:p-6 xl:p-8"},se={class:"pt-0 px-0"},ae={class:"w-full mx-0"},le={class:"bg-white rounded-lg p-0 sm:p-6 xl:p-0"},oe={class:"grid md:grid-cols-2 gap-2"},ne={class:"grid col-span-2"},ie=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Judul",-1),de={class:"text-xs text-red-600 mt-1"},re=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Tipe",-1),ue=e("option",{disabled:"",selected:""},"Pilih ?",-1),ce=e("option",null,"Link",-1),me=e("option",null,"Upload",-1),pe=[ue,ce,me],_e={class:"text-xs text-red-600 mt-1"},he={key:0},xe=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Link",-1),fe={class:"text-xs text-red-600 mt-1"},ve={key:1},ge=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"File",-1),be=e("p",{class:"text-sm font-bold"},[c(" Pilih file : "),e("code",{class:"text-red-400"},".doc/docx/pdf - max 5 MB")],-1),we={class:"text-xs text-red-600 mt-1"},ke=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),Ce={__name:"Tambah",setup(ye){const f=V();C(()=>f.getSekolah),f.$subscribe((l,t)=>{}),P().setPagesActive("buletin");const m=T();A().params.id,i([]);const s=i([]);i([]);const v=l=>l?l.length<1?"This Field must be at least 2 characters":!0:"This field is required",B=()=>{s.value.tipe=="Upload"?D(p.value)&&U(p.value):F()},F=async l=>{let t={nama:s.value.nama,tipe:s.value.tipe,link:s.value.link,file:s.value.file};try{const o=await w.post("owner/buletinpsikologi",t);return n.success("Success","Data Berhasil ditambahkan!"),m.push({name:"AdminBuletin"}),o.data}catch(o){n.danger("Warning","Data gagal ditambahkan!"),console.error(o)}},p=i(null),g=i(null),S=l=>{let t=l.target.files[0];p.value=t,g.value=URL.createObjectURL(t),console.log(t,g.value)},D=l=>l?l.size>5048576?(n.danger("Warning","File harus kurang dari 5mb!"),!1):!0:(n.danger("Info","Pilih File terlebih dahulu!"),!1),U=async(l,t)=>{let o="owner/buletinpsikologi",a=new FormData;a.append("nama",s.value.nama),a.append("tipe",s.value.tipe),a.append("link",s.value.link),a.append("file",l);try{const d=await w.post(o,a,{headers:{"Content-Type":"multipart/form-data"}});return n.success("Success","Data Berhasil update!"),console.log(d),m.push({name:"AdminBuletin"}),d.data}catch(d){n.danger("Warning","Data gagal ditambahkan!"),console.error(d)}};return(l,t)=>(_(),h(L,null,[e("div",z,[E,e("div",G,[r(N,null,{content:b(()=>[I,r(R),$]),_:1})])]),e("div",J,[K,e("div",O,[e("span",{onClick:t[0]||(t[0]=o=>x(m).go(-1))},Z)])]),e("div",H,[e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[r(x(q),{onSubmit:B},{default:b(({errors:o})=>[e("div",se,[e("div",ae,[e("div",le,[e("div",oe,[e("div",ne,[ie,k(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.nama=a),rules:v,name:"nama",ref:"nama",class:"textarea textarea-bordered md:w-full max-w-2xl",placeholder:""},null,512),[[j,s.value.nama]]),e("div",de,u(o.nama),1)]),e("div",null,[re,k(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.tipe=a),rules:v},pe,512),[[M,s.value.tipe]]),e("div",_e,u(o.tipe),1)]),s.value.tipe=="Link"?(_(),h("div",he,[xe,r(x(W),{modelValue:s.value.link,"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.link=a),type:"text",name:"link",ref:"link",class:"input input-bordered md:w-full max-w-2xl",required:""},null,8,["modelValue"]),e("div",fe,u(o.link),1)])):y("",!0),s.value.tipe=="Upload"?(_(),h("div",ve,[ge,be,e("input",{type:"file",name:"fileUpload",onChange:t[4]||(t[4]=a=>S(a)),class:"input md:w-full max-w-2xl",required:""},null,32),e("div",we,u(o.file),1)])):y("",!0)]),ke])])])]),_:1})])])])])])],64))}};export{Ce as default};
