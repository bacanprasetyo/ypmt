import{u as C,d as A,a as T,b as L,c as R,r as i,o as f,e as v,f as e,t as d,g as c,w as y,h as g,F as $,A as u,T as n,P as b,Z as M,Q as D,p as B,i as m}from"./index.156f8da1.js";import{B as N}from"./BreadCrumb.47384a78.js";import{B as W}from"./BreadCrumbSpace.c287fb01.js";import{F as q,a as E}from"./vee-validate.esm.8976f289.js";const G={class:"pt-4 px-10 md:flex justify-between"},K={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"},z={class:"md:py-0 py-4"},I=m(" Klasifikasi "),J=m(" Edit "),O={class:"pt-4 px-10 md:flex justify-between"},Q=e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-gray-700 shadow-sm"})],-1),Z={class:"md:py-0 py-4 space-x-2 space-y-2"},H=e("button",{class:"btn hover:shadow-lg shadow text-white hover:text-gray-100 gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})]),m(" Kembali ")],-1),X=[H],Y={class:"px-4 py-4"},ee={class:"w-full"},te={class:"bg-white shadow rounded-lg px-0 py-4"},se={class:"w-full lg:w-fi mx-4"},ae={class:"p-2 sm:p-6 xl:p-8"},oe={class:"pt-0 px-0"},le={class:"w-full mx-0"},ne={class:"bg-white rounded-lg p-0 sm:p-6 xl:p-0"},ie={class:"grid md:grid-cols-2 gap-2"},de={class:"grid col-span-2"},re=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Judul",-1),ce={class:"text-xs text-red-600 mt-1"},ue=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Jenis",-1),me=e("option",{disabled:"",selected:""},"Pilih ?",-1),pe=e("option",null,"Studi",-1),_e=e("option",null,"Kerja",-1),xe=[me,pe,_e],he={class:"text-xs text-red-600 mt-1"},fe=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Tipe",-1),ve=e("option",{disabled:"",selected:""},"Pilih ?",-1),ge=e("option",null,"Link",-1),be=e("option",null,"Upload",-1),we=[ve,ge,be],ke={class:"text-xs text-red-600 mt-1"},ye={key:0},De=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Link",-1),Be={class:"text-xs text-red-600 mt-1"},je={key:1},Se=e("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"File",-1),Fe=e("p",{class:"text-sm font-bold"},[m(" Pilih file : "),e("code",{class:"text-red-400"},".doc/docx/pdf - max 5 MB")],-1),Ue={class:"text-xs text-red-600 mt-1"},Pe=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),We={__name:"Edit",setup(Ve){const w=C();A(()=>w.getSekolah),w.$subscribe((s,a)=>{}),T().setPagesActive("referensi");const p=L(),_=R().params.id;i([]);const t=i([]);i([]),(async()=>{try{const s=await u.get(`owner/referensi/${_}`);return t.value=s.data,s.data}catch(s){console.error(s)}})();const j=i([]);(async()=>{try{const s=await u.get("owner/paket");return j.value=s.data,s}catch(s){n.danger("Warning","Data Gagal dimuat"),console.error(s)}})();const x=s=>s?s.length<1?"This Field must be at least 2 characters":!0:"This field is required",S=()=>{t.value.tipe=="Upload"?P(h.value)&&V(h.value):F()},F=async s=>{let a={nama:t.value.nama,tipe:t.value.tipe,link:t.value.link,file:t.value.file,jenis:t.value.jenis};try{const l=await u.put(`owner/referensi/${_}`,a);return n.success("Success","Data Berhasil ditambahkan!"),p.push({name:"AdminReferensi"}),l.data}catch(l){n.danger("Warning","Data gagal ditambahkan!"),console.error(l)}},h=i(null),k=i(null),U=s=>{let a=s.target.files[0];h.value=a,k.value=URL.createObjectURL(a),console.log(a,k.value)},P=s=>s?s.size>5048576?(n.danger("Warning","File harus kurang dari 5mb!"),!1):!0:(n.danger("Info","Pilih File terlebih dahulu!"),!1),V=async(s,a)=>{let l=`owner/referensi/${_}`,o=new FormData;o.append("nama",t.value.nama),o.append("tipe",t.value.tipe),o.append("link",t.value.link),o.append("jenis",t.value.jenis),o.append("file",s);try{const r=await u.post(l,o,{headers:{"Content-Type":"multipart/form-data"}});return n.success("Success","Data Berhasil update!"),console.log(r),p.push({name:"AdminReferensi"}),r.data}catch(r){n.danger("Warning","Data gagal ditambahkan!"),console.error(r)}};return(s,a)=>(f(),v($,null,[e("div",G,[e("div",null,[e("span",K,d(t.value.nama),1)]),e("div",z,[c(N,null,{content:y(()=>[I,c(W),J]),_:1})])]),e("div",O,[Q,e("div",Z,[e("span",{onClick:a[0]||(a[0]=l=>g(p).go(-1))},X)])]),e("div",Y,[e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[c(g(q),{onSubmit:S},{default:y(({errors:l})=>[e("div",oe,[e("div",le,[e("div",ne,[e("div",ie,[e("div",de,[re,b(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.nama=o),rules:x,name:"nama",ref:"nama",class:"textarea textarea-bordered md:w-full max-w-2xl",placeholder:""},null,512),[[M,t.value.nama]]),e("div",ce,d(l.nama),1)]),e("div",null,[ue,b(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":a[2]||(a[2]=o=>t.value.jenis=o),rules:x},xe,512),[[D,t.value.jenis]]),e("div",he,d(l.jenis),1)]),e("div",null,[fe,b(e("select",{class:"select select-bordered w-full max-w-xs","onUpdate:modelValue":a[3]||(a[3]=o=>t.value.tipe=o),rules:x},we,512),[[D,t.value.tipe]]),e("div",ke,d(l.tipe),1)]),t.value.tipe=="Link"?(f(),v("div",ye,[De,c(g(E),{modelValue:t.value.link,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.link=o),type:"text",name:"link",ref:"link",class:"input input-bordered md:w-full max-w-2xl",required:""},null,8,["modelValue"]),e("div",Be,d(l.link),1)])):B("",!0),t.value.tipe=="Upload"?(f(),v("div",je,[Se,Fe,e("input",{type:"file",name:"fileUpload",onChange:a[5]||(a[5]=o=>U(o)),class:"input md:w-full max-w-2xl",required:""},null,32),e("div",Ue,d(l.file),1)])):B("",!0)]),Pe])])])]),_:1})])])])])])],64))}};export{We as default};
